# Full-Stack Developer Task — Keypress Stats

Додаток для збору статистики натискань клавiш у реальному часi.

---

## Що робить проект?

- Вiдстежує клавiшi, що натискаються користувачами
- Забезпечує вiдображення статистики по клавiшах
- Створює окремі статичні сторiнки для кожної клавiшi (/keypress/\:key)

---

## Старт проекту

> Node.js v20

```bash
cd app/client && npm install && npm run dev
cd app/server && npm install && npm run start:dev
docker compose up --build -d
```

Після запуску додаток доступний за посиланням: (http://localhost:3000)

---

## Оптимізація запису та читання

- Натискання клавіш зберігаються спочатку у пам'яті (`Map<string, number>`) у `KeysCounterService`
- Запис у базу виконується **пакетно**, через `bufferTime` (RxJS) з певною затримкою (batch insert)
- Один SQL-запит оновлює всі зміни: `INSERT ... ON CONFLICT DO UPDATE`
- Зчитування статистики (включно з /key/\:key) відбувається **напряму з памʼяті**, не з бази — це дозволяє бачити миттєвий результат
- При старті сервісу зчитуються наявні значення з БД та ініціалізується кеш

> Такий підхід дозволяє значно зменшити навантаження на БД та одночасно показувати найактуальнішу статистику

---

## Технології

- Frontend: Next.js App Router + Tailwind
- Backend: NestJS + TypeORM + PostgreSQL + WebSocket
- State management: MobX + in-memory cache

---

## Резюме підходу

- Ядрова логiка була сконцентрована у KeysCounterService / KeysService
- Запис здiйснюється покванно, що зменшує i/o з базою
- Зчитується тільки з кешу в пам'ятi
- Код простий та чiткий, роздiлено на сервiси
